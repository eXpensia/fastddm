name: Check CUDA installation Windows

on:
  workflow_dispatch:
  
jobs:

  build:
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [windows-latest]
        visual-studio: ["Visual Studio 16 2019"]
        cuda: ["12.1.1"]
    
    steps:
      - uses: actions/checkout@v3
      
      - name: Install CUDA on Windows
        if: contains(matrix.os, 'windows')
        env:
          cuda: ${{ matrix.cuda }}
          cmake-generator: "${{ matrix.visual-studio }}"
          visual_studio: "${{ matrix.visual-studio }}"
        run: .github\action-scripts\install-cuda-windows.ps1
        shell: powershell

      - name: Test nvcc
        run: |
          #nvcc -V
          ls $env:CUDA_PATH
          ls $env:CUDA_PATH\bin
          ls $env:CUDA_PATH\include
        shell: powershell
